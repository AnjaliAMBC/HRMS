@model HRMS.Models.Employee.EmpAttedenceModel

<div class="empattendence-container">

    <style>
        .attendence-title {
            display: inline-block;
            vertical-align: middle; /* Align vertically with the slider */
        }

        .left-right-icon {
            display: inline-block;
            vertical-align: middle; /* Align vertically with the label */
            font-size: 20px;
        }

        .left-btn,
        .right-btn {
            cursor: pointer;
        }

        span {
            font-weight: bold;
        }
    </style>

    @{

        // Format the dates
        string startDateFormatted = Model.startWeek.ToString("dd MMMM yyyy");
        string endDateFormatted = Model.EndWeek.ToString("dd MMMM yyyy");

    }
    <div class="attendance-nav">

        <div class="att-div">
            <div>
                <span class="attendence-title">Attendance</span>
                @*<p style="display: inline-block;" class="left-right-icon"><i class="bi bi-chevron-left left-btn"></i><span>01 April 2024 </span>- <span>08 April 2024</span><i class="bi bi-chevron-right right-btn"></i></p>*@

                <div id="week-slider" class="left-right-icon">
                    <i class="bi bi-chevron-left left-btn"></i>
                    <span id="week-start">@startDateFormatted</span> - <span id="week-end">@endDateFormatted</span>
                    <i class="bi bi-chevron-right right-btn"></i>
                </div>
            </div>

            <div class="att-calender">

                <div class="from-to-calen">
                    <span>From</span> <input type="date" name="" id="">
                    &nbsp; &nbsp;<span>To</span> <input type="date" name="" id="">
                </div>

                <div class="apply-div">
                    <button class="apply-filter">Apply</button>
                </div>

            </div>

        </div>
        <div class="att-table">

            <table id="attendanceTable" class="table table-attendence">
                <thead class="attendence-thead">
                    <tr>
                        <th scope="col">Date</th>
                        <th scope="col" style="text-align: center;">Checkin-Check-Out</th>
                        <th scope="col">Hours</th>
                        <th scope="col">Status</th>
                    </tr>
                </thead>
                <tbody>

                    @foreach (tbld_ambclogininformation attendence in Model.AttedenceList)
                    {
                        <tr>
                            <th scope="row">@attendence.Login_date.ToString("dd MMMM yyyy") <br><span class="fntblur">@attendence.Login_date.ToString("ddd", System.Globalization.CultureInfo.InvariantCulture)</span></th>

                            @{
                                string starttimeWithAmPm = @attendence.Signin_Time.ToString("hh:mm tt", System.Globalization.CultureInfo.InvariantCulture);
                                string endtimeWithAmPm = @attendence.Signout_Time?.ToString("hh:mm tt", System.Globalization.CultureInfo.InvariantCulture);


                            }
                            <td class="bar-wi bar-wd">
                                <div class="progress attendance-bar bar">
                                    <div class="progress-bar bar-width-green" role="progressbar" aria-valuenow="75" aria-valuemin="10" aria-valuemax="10"></div>
                                    <span class="bar-time">@starttimeWithAmPm - @endtimeWithAmPm</span>
                                </div>
                            </td>
                            <td class="bar-wd">09h:10m</td>
                            <td><button class="present-btn">Present</button></td>
                        </tr>
                    }

                    @*<tr>
                            <th scope="row">02 April 2024 <br><span class="fntblur">Tue</span></th>
                            <td class="bar-wi bar-wd">
                                <div class="progress attendance-bar bar">
                                    <div class="progress-bar bar-width-green" role="progressbar" aria-valuenow="75" aria-valuemin="10" aria-valuemax="10"></div>
                                    <span class="bar-time">09:30 AM- 06:30 PM</span>
                                </div>
                            </td>
                            <td class="bar-wd">09h:00m</td>
                            <td><button class="present-btn">Present</button></td>
                        </tr>
                        <tr>
                            <th scope="row">03 April 2024 <br><span class="fntblur">Wed</span></th>
                            <td class="bar-wi bar-wd">
                                <div class="progress attendance-bar bar">
                                    <div class="progress-bar bar-width-red" role="progressbar" aria-valuenow="75" aria-valuemin="10" aria-valuemax="10"></div>
                                    <span class="bar-time">Emergency Leave</span>
                                </div>
                            </td>
                            <td class="bar-wd">00h:00m</td>
                            <td><button class="leave-btn">Leave</button></td>
                        </tr>
                        <tr>
                            <th scope="row">04 April 2024 <br><span class="fntblur">Thu</span></th>
                            <td class="bar-wi bar-wd">
                                <div class="progress attendance-bar bar">
                                    <div class="progress-bar bar-width-yellow" role="progressbar" aria-valuenow="75" aria-valuemin="10" aria-valuemax="10"></div>
                                    <span class="bar-time">09:30 AM- 04:30 PM</span>
                                </div>
                            </td>
                            <td class="bar-wd">07h:00m</td>
                            <td><button class="yellow-btn">Permission</button></td>
                        </tr>
                        <tr>
                            <th scope="row">05 April 2024 <br><span class="fntblur">Fri</span></th>
                            <td class="bar-wi bar-wd">
                                <div class="progress attendance-bar bar">
                                    <div class="progress-bar bar-width-green" role="progressbar" aria-valuenow="75" aria-valuemin="10" aria-valuemax="10"></div>
                                    <span class="bar-time">09:35 AM- 06:55 PM</span>
                                </div>
                            </td>
                            <td class="bar-wd">09h:10m</td>
                            <td><button class="present-btn">Present</button></td>
                        </tr>
                        <tr>
                            <th scope="row">06 April 2024 <br><span class="fntblur">Sat</span></th>
                            <td class="bar-wi bar-wd">
                                <div class="progress attendance-bar bar">
                                    <div class="progress-bar bar-width-gray" role="progressbar" aria-valuenow="75" aria-valuemin="10" aria-valuemax="10"></div>
                                    <span class="bar-time">Weekend</span>
                                </div>
                            </td>
                            <td class="bar-wd">00h:00m</td>
                            <td><button class="gray-btn">Weekend</button></td>
                        </tr>
                        <tr>
                            <th scope="row">07 April 2024 <br><span class="fntblur">Sun</span></th>
                            <td class="bar-wi bar-wd">
                                <div class="progress attendance-bar bar">
                                    <div class="progress-bar bar-width-gray" role="progressbar" aria-valuenow="75" aria-valuemin="10" aria-valuemax="10"></div>
                                    <span class="bar-time">Weekend</span>
                                </div>
                            </td>
                            <td class="bar-wd">00h:00m</td>
                            <td><button class="gray-btn">Weekend</button></td>
                        </tr>*@
                </tbody>
            </table>

        </div>

        @*<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>*@
    </div>

    <script>
        $(document).ready(function () {

            if (!$.fn.DataTable.isDataTable('#attendanceTable')) {
                $('#attendanceTable').DataTable({
                    "paging": true,
                    "searching": true,
                    "ordering": true,
                    "info": true,
                    "autoWidth": false,
                    "pageLength": 3, // Set the number of records per page to 3
                    "columnDefs": [
                        { "orderable": false, "targets": 1 }, // Disable ordering on the Checkin-Check-Out column
                        { "orderable": false, "targets": 3 }  // Disable ordering on the Status column
                    ]
                });
            }

            //$('#attendanceTable').DataTable({
            //    "paging": true,
            //    "searching": true,
            //    "ordering": true,
            //    "info": true,
            //    "pageLength": 3,
            //    "autoWidth": false,
            //    "columnDefs": [
            //        { "orderable": false, "targets": 1 }, // Disable ordering on the Checkin-Check-Out column
            //        { "orderable": false, "targets": 3 }  // Disable ordering on the Status column
            //    ]
            //});
        });

    </script>
</div>

